<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>R Scripts for Tiddlywiki • twrscripts</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="R Scripts for Tiddlywiki">
<meta name="description" content="TiddlyWiki is a unique non-linear notebook for capturing, organising and sharing complex information. twrsripts is a R scripts of TiddlyWiki &lt;https://tiddlywiki.com&gt; to manage tiddlers, e.g. reference.">
<meta property="og:description" content="TiddlyWiki is a unique non-linear notebook for capturing, organising and sharing complex information. twrsripts is a R scripts of TiddlyWiki &lt;https://tiddlywiki.com&gt; to manage tiddlers, e.g. reference.">
<!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-4HPNYGL5FT"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-4HPNYGL5FT');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">twrscripts</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/byzheng/twrscripts/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><blockquote>
<p>[!CAUTION] This package will modify and delete tidders in Tiddlywiki. Use it with caution. Create a backup and test it before using,</p>
</blockquote>
<div class="section level1">
<div class="page-header"><h1 id="tw-rscripts">tw-rscripts<a class="anchor" aria-label="anchor" href="#tw-rscripts"></a>
</h1></div>
<p>R package <code>twrscripts</code> is a collections of R Scripts for <a href="https://tiddlywiki.com/" class="external-link">Tiddlywiki</a> to manage</p>
<ul>
<li>authoring publications using multiple sources (ORCID, Scopus, Google Scholar, ResearcherID, homepage)</li>
<li>reference list of publications (crossref and opencitations)</li>
</ul>
<p>with following scenarios</p>
<ul>
<li>Tiddlywiki is configured with <a href="https://tiddlywiki.com/static/Installing%2520TiddlyWiki%2520on%2520Node.js.html" class="external-link">Node.js</a> in localhost or no authortication requirement.</li>
<li>using <a href="https://kookma.github.io/TW-Refnotes/" class="external-link">TW-Refnotes</a> to manage reference in Tiddlywiki</li>
<li>using data structure below.</li>
<li>proper configurations of API authortication for multiple sources (e.g. ORCID, Scopus, ResearcherID).</li>
</ul>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Install the developing version from <a href="https://github.com/byzheng/twrscripts" class="external-link">Github</a>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">'byzheng/twrscripts'</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="data-structure">Data structure<a class="anchor" aria-label="anchor" href="#data-structure"></a>
</h2>
<p>Tiddlers with tag <code>Colleague</code> refer to a person in a real life with following fields which are used in this package.</p>
<ul>
<li>
<code>url</code> for personal webpage, with assumption to contain a list of publications.</li>
<li>
<code>google-scholar</code> for personal profile to <a href="https://scholar.google.com" class="external-link">Google Schole</a>.</li>
<li>
<code>orcid</code> for personal profile to <a href="https://orcid.org/" class="external-link">ORCID</a>.</li>
<li>
<code>researcherid</code> for personal profile to <a href="https://www.webofscience.com/wos/author/search" class="external-link">Web of Science ResearcherID</a>.</li>
<li>
<code>scopus</code> for author profile to <a href="https://www.scopus.com/" class="external-link">Scopus</a>.</li>
</ul>
<p>Tiddlers with tag <code>bibtex-entry</code> refer to publication which can be imported wtih <a href="https://kookma.github.io/TW-Refnotes/" class="external-link">TW-Refnotes</a> plugin with following tags and fields which are used in this package.</p>
<ul>
<li>
<code>tags</code> with colleague names for authoring this publication.</li>
<li>field <code>bibtex-doi</code> as DOI for this publication. DOI is in many functions to identify a publication</li>
<li>field <code>reference</code> to list all references of a publication (only in the Tiddlywiki. Data obtained from <a href="https://www.crossref.org/" class="external-link">crossref</a> and <a href="https://opencitations.net/" class="external-link">opencitations</a>).</li>
<li>field <code>reference-count</code> for number of reference in field <code>reference</code>.</li>
<li>field <code>cited-count</code> for number of publications to cite this publication.</li>
</ul>
</div>
<div class="section level2">
<h2 id="output-and-intermediate-files">Output and intermediate files<a class="anchor" aria-label="anchor" href="#output-and-intermediate-files"></a>
</h2>
<p>To avoid redownloading data from multiple resources (e.g. Google Scholar, ORCID, Web of Science/ResearcherID, Scopus), retrieved data are locally stored and reused for a period. The local folder is configured by option <code>output</code> with default <code>output</code> in the working directory. The data will be expried in certain days (90 days in default and configured by option <code>file_expired</code>). As online API constrained daily request number, only a small number of files are removed at each call (3 in default and configured by option <code>file_remove_max</code>). The maximum number of colleagues is limited for each call by option <code>author_max</code> (10 in default) to constrain request number for WebAPI.</p>
<p>If you run authoring as daily schedule task, all files will be gradually updated.</p>
</div>
<div class="section level2">
<h2 id="authoring-publications">Authoring publications<a class="anchor" aria-label="anchor" href="#authoring-publications"></a>
</h2>
<p>The authors of a publication is searched from multiple platforms (i.e. Personal Webpage, Google Scholar, ORCID, ResearcherID and Scopus) according to related information.</p>
<div class="section level3">
<h3 id="scopus">Scopus<a class="anchor" aria-label="anchor" href="#scopus"></a>
</h3>
<p>In the tiddlers with tag <code>Colleague</code>, field <code>scopus</code> is used as author profile in <a href="https://www.scopus.com/" class="external-link">Scopus</a>.</p>
<p>R package <a href="https://github.com/muschellij2/rscopus" class="external-link">rscopus</a> is used to retrieve publication list for each colleague. See <a href="https://github.com/muschellij2/rscopus" class="external-link">rscopus</a> to configure API Key for Scopus.</p>
</div>
<div class="section level3">
<h3 id="orcid">ORCID<a class="anchor" aria-label="anchor" href="#orcid"></a>
</h3>
<p>In the tiddlers with tag <code>Colleague</code>, field <code>orcid</code> is used as author profile in <a href="https://orcid.org/" class="external-link">ORCID</a>.</p>
<p>R package <a href="https://github.com/ropensci-archive/rorcid" class="external-link">rorcid</a> is used to retrieve works from ORCID. Package <code>rorcid</code> is archived now and there is no alternative R package to access ORCID API in R. This package use two system variables to authenticate orcid (i.e. <code>ORCID_CLIENT_ID</code> and <code>ORCID_CLIENT_SECRET</code>).</p>
</div>
<div class="section level3">
<h3 id="researcher-id">Researcher ID<a class="anchor" aria-label="anchor" href="#researcher-id"></a>
</h3>
<p>In the tiddlers with tag <code>Colleague</code>, field <code>researcherid</code> is used as author profile in <a href="https://www.webofscience.com/" class="external-link">Web of Scient</a>.</p>
<p>[WOS Starter API] (<a href="https://developer.clarivate.com/apis/wos-starter" class="external-link uri">https://developer.clarivate.com/apis/wos-starter</a>) is used to retrieve works from Web of Scient. This package use environment variable to authenticate WOS (i.e. <code>WOS_STARTER_KEY</code>).</p>
<p>R package <a href="https://github.com/ropensci-archive/rorcid" class="external-link">rorcid</a> is used to retrieve works from ORCID. Package <code>rorcid</code> is archived now and there is no alternative R package to access ORCID API in R. This package use two system variables to authenticate orcid (i.e. <code>ORCID_CLIENT_ID</code> and <code>ORCID_CLIENT_SECRET</code>).</p>
</div>
</div>
<div class="section level2">
<h2 id="google-scholar">Google Scholar<a class="anchor" aria-label="anchor" href="#google-scholar"></a>
</h2>
<p>R package <code>scholar</code> is used to retrieve works from <a href="https://scholar.google.com/" class="external-link">Google Scholar</a> according to <code>google-scholar</code>field in Tiddlywiki. As Google Scholar does not provide DOI for publications, the publication is matched according to the same published year and journal and similar title. Consequently, the matching might not be accurate.</p>
<div class="section level3">
<h3 id="colleague-homepage">Colleague Homepage<a class="anchor" aria-label="anchor" href="#colleague-homepage"></a>
</h3>
<p>In the tiddlers with tag <code>Colleague</code>, field <code>url</code> is used as author homepage. All <code>doi</code>s in the url are assumed as colleague’s publications.</p>
</div>
</div>
<div class="section level2">
<h2 id="reference-list">Reference list<a class="anchor" aria-label="anchor" href="#reference-list"></a>
</h2>
<p>The reference list of a publication is obtained from <a href="https://www.crossref.org/" class="external-link">crossref</a> with R package <a href="https://github.com/ropensci/rcrossref" class="external-link">rcrossref</a> and and <a href="https://opencitations.net/" class="external-link">opencitations</a>, and added into field <code>reference</code> in the Tiddlywiki. Two fields <code>reference-count</code> and <code>cited-count</code> is also updated for number of reference and citation for a publication, respectively.</p>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<ul>
<li>Function <code>works</code> is to retrive works from all resources above.</li>
<li>Function <code>reference</code> is to get reference list.</li>
<li>Function <code>convert_pinyin</code> is to convert tiddler with Chinese title into pinyin in <code>aka</code> field.</li>
<li>Function <code>check_colleague</code> is to check duplicate fields for colleagues.</li>
</ul>
<p>Alternatively, a batch job can be created for daily schedule (all records) and manully execution (new records). Here is an example R Script for all functions</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">args</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/commandArgs.html" class="external-link">commandArgs</a></span><span class="op">(</span>trailingOnly<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#source("Rcode/function.R")</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">args</span><span class="op">)</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">is_new</span> <span class="op">&lt;-</span> <span class="cn">TRUE</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="va">is_new</span> <span class="op">&lt;-</span> <span class="cn">FALSE</span></span>
<span><span class="op">}</span></span>
<span><span class="fu">twrscripts</span><span class="fu">::</span><span class="fu"><a href="reference/tws_options.html">tws_options</a></span><span class="op">(</span>host <span class="op">=</span> <span class="st">"http://127.0.0.1:8080/"</span>,</span>
<span>                        output <span class="op">=</span> <span class="st">"output"</span><span class="op">)</span></span>
<span><span class="co"># Check colleagues</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch</a></span><span class="op">(</span><span class="op">{</span></span>
<span>    <span class="fu">twrscripts</span><span class="fu">::</span><span class="fu"><a href="reference/check_colleagues.html">check_colleagues</a></span><span class="op">(</span><span class="op">)</span>    </span>
<span><span class="op">}</span>, warning <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">w</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/warning.html" class="external-link">warning</a></span><span class="op">(</span><span class="va">w</span><span class="op">)</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">"Duplicates in the colleague's fields."</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"Update works for colleagues"</span><span class="op">)</span></span>
<span>    <span class="fu">twrscripts</span><span class="fu">::</span><span class="fu"><a href="reference/works.html">works</a></span><span class="op">(</span>is_new <span class="op">=</span> <span class="va">is_new</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"Get reference list from crossref"</span><span class="op">)</span></span>
<span>    <span class="fu">twrscripts</span><span class="fu">::</span><span class="fu"><a href="reference/reference.html">reference</a></span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"Convert title to pinyin"</span><span class="op">)</span></span>
<span>    <span class="fu">twrscripts</span><span class="fu">::</span><span class="fu"><a href="reference/convert_pinyin.html">convert_pinyin</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<p>This R script can be saved into a file, e.g. tw_script.R. In Windows, a batch script can be used to schedule a daily task (e.g. tw_script.bat).</p>
<pre><code>Rscript.exe tw_script.R update 1&gt;standard.out 2&gt;standdar.err</code></pre>
</div>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/byzheng/twrscripts/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/byzheng/twrscripts/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing twrscripts</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Bangyou Zheng <br><small class="roles"> Maintainer </small>  </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Bangyou Zheng.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
